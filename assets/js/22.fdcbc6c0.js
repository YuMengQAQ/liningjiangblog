(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{410:function(t,a,s){"use strict";s.r(a);var e=s(10),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"使用-github-pages-部署-vue-项目总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-github-pages-部署-vue-项目总结"}},[t._v("#")]),t._v(" 使用 Github Pages 部署 Vue 项目总结")]),t._v(" "),s("h2",{attrs:{id:"_1、准备一个自己的域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、准备一个自己的域名"}},[t._v("#")]),t._v(" 1、准备一个自己的域名")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("GitHub 默认的免费域名强制开启 https")])]),t._v(" "),s("li",[s("p",[t._v("在 https 协议中无法发出 http 请求")])]),t._v(" "),s("li",[s("p",[t._v("我们项目中使用的接口都是 http 协议的，所以需要准备一个自己的域名，因为自定义域名可以选择使用 http 协议或者 https 协议")])]),t._v(" "),s("li",[s("p",[t._v("或者你让接口开发者为接口服务提供 https 的支持")])])]),t._v(" "),s("h2",{attrs:{id:"_2、在域名管理后台添加-cname-记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、在域名管理后台添加-cname-记录"}},[t._v("#")]),t._v(" 2、在域名管理后台添加 "),s("code",[t._v("CNAME")]),t._v(" 记录")]),t._v(" "),s("ul",[s("li",[t._v("主机就是域名前面的前缀名字\n"),s("ul",[s("li",[t._v("比如：toutiao.lining-jiang.xyz")])])]),t._v(" "),s("li",[t._v("指向必须指向你的 github 地址，\n"),s("ul",[s("li",[t._v("比如：yumengqaq.github.io")])])]),t._v(" "),s("li",[t._v("TTP 默认一小时")])]),t._v(" "),s("h2",{attrs:{id:"_3、在项目的-public-目录中添加-cname-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、在项目的-public-目录中添加-cname-文件"}},[t._v("#")]),t._v(" 3、在项目的 "),s("code",[t._v("public")]),t._v(" 目录中添加 "),s("code",[t._v("CNAME")]),t._v(" 文件")]),t._v(" "),s("ul",[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("toutiao.lining-jiang.xyz\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_4、生成-github-访问令牌"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、生成-github-访问令牌"}},[t._v("#")]),t._v(" 4、生成 GitHub 访问令牌")]),t._v(" "),s("ul",[s("li",[t._v("点击用户 settings")]),t._v(" "),s("li",[t._v("左侧有一个 Developer settings")]),t._v(" "),s("li",[t._v("点击 Personal access tokens，再点击 Generate new token")]),t._v(" "),s("li",[t._v("勾选 repo、workflow")]),t._v(" "),s("li",[t._v("点击创建成功（备注：token 仅显示 1 次，之后无法查看，所以建议把 token 保存到你的私密位置。）")])]),t._v(" "),s("h2",{attrs:{id:"_5、创建远程仓库-如果创建就不需要了"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、创建远程仓库-如果创建就不需要了"}},[t._v("#")]),t._v(" 5、创建远程仓库（如果创建就不需要了）")]),t._v(" "),s("h2",{attrs:{id:"_6、将-github-访问令牌添加到远程仓库的-secrets-中"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、将-github-访问令牌添加到远程仓库的-secrets-中"}},[t._v("#")]),t._v(" 6、将 GitHub 访问令牌添加到远程仓库的 secrets 中")]),t._v(" "),s("ul",[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Name：ACCESS_TOKEN\nValue: 之前生成的 GitHub 访问令牌\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_7、在项目根目录中添加-github-workflows-main-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、在项目根目录中添加-github-workflows-main-yml"}},[t._v("#")]),t._v(" 7、在项目根目录中添加 "),s("code",[t._v(".github/workflows/main.yml")])]),t._v(" "),s("ul",[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("name: build and deploy\n\n# 当 master 分支 push 代码的时候触发 workflow\non:\n  push:\n    branches:\n    - master\n\njobs:\n  build-deploy:\n    runs-on: ubuntu-latest\n    steps:\n    # 下载仓库代码\n    - uses: actions/checkout@v2\n\n    # 缓存依赖\n    - name: Get yarn cache\n      id: yarn-cache\n      run: echo \"::set-output name=dir::$(yarn cache dir)\"\n    - uses: actions/cache@v1\n      with:\n        path: ${{ steps.yarn-cache.outputs.dir }}\n        key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\n        restore-keys: |\n          ${{ runner.os }}-yarn-\n\n    # 安装依赖\n    - run: yarn\n\n    # 打包构建\n    - run: yarn build\n\n    # 发布到 GitHub Pages\n    - name: Deploy\n      uses: peaceiris/actions-gh-pages@v2\n      env:\n        PERSONAL_TOKEN: ${{ secrets.ACCESS_TOKEN }} # 访问秘钥\n        PUBLISH_BRANCH: gh-pages # 推送分支\n        PUBLISH_DIR: ./dist # 部署目录\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_8、把项目代码推送到远程仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8、把项目代码推送到远程仓库"}},[t._v("#")]),t._v(" 8、把项目代码推送到远程仓库")]),t._v(" "),s("h2",{attrs:{id:"_9、查看构建部署状态-它需要执行一个构建部署的流程-没那么快"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9、查看构建部署状态-它需要执行一个构建部署的流程-没那么快"}},[t._v("#")]),t._v(" 9、查看构建部署状态（它需要执行一个构建部署的流程，没那么快）")]),t._v(" "),s("p",[t._v("最后就是如何更新项目网站？")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("很简单，修改源代码，把更新提交到远程仓库即可。\n说白了你可以忽略网站部署这件事儿了。\n")])])]),s("p",[t._v("然后你可以通过仓库中的 Action 查看构建部署状态（非必须）。")])])}),[],!1,null,null,null);a.default=n.exports}}]);